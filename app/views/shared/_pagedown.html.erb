<%# encoding: utf-8 %>

<!-- Allows the partial to be used for all form partials -->
<% @article = @web_service || @quick_answer || @guide %>


<% @button_name = @article.class.to_s.split(/(?=[A-Z])/).join('_').downcase %>

<style type="text/css">
/* Honolulu Answers CSS - V2 */
/* Boostrap Scaffolding Included in asset pipeliene */

/* Font-Face Declarations */
@import url(http://fonts.googleapis.com/css?family=Satisfy);
@import url(http://fonts.googleapis.com/css?family=Oswald);
@import url(https://github.com/theleagueof/league-gothic/blob/master/LeagueGothic-Regular.otf?raw=true);
@import url(http://fonts.googleapis.com/css?family=News+Cycle);
@import url(http://fonts.googleapis.com/css?family=Archivo+Narrow);


/* CSS Reset - Eric Meyer */
html, body, div, span, ul, ol, li, form, fieldset, legend, label, h1, h2, h3, h4, h5, h6, p, a { 
  margin: 0; padding: 0; border: 0; font-size: 100%; font: inherit; vertical-align: baseline; }
article, aside, details, figcaption, figure, footer, header, hgroup, menu, nav, section { display: block; }
ol, ul, li { list-style: none; }

/* Removing outline border on active links (WCAG safe - active state links handled explicitly below) */
a:focus, a:active { 
  outline: 0;
  background-color: rgb(255,222,77);
  color: black;
}

.clearfix:after { content: "."; display: block; height: 0; clear: both; visibility: hidden; }
.clearfix { display: inline-block; }
* html .clearfix { height: 1%; }
.clearfix { display: block; }



/* Get Satisfaction tweaks */
a.gsfn-jqmClose {
  border-bottom: none;
}



/* General Styles */
/* -------------- */
body {
 font: 100%/1.5 "Helvetica Neue", Helvetica, Tahoma, Arial, sans-serif;
}


/* Fonts */
/* ----- */
h2, h3, h4, h5, h6 { font: 100%/1.5 "Helvetica Neue", Helvetica, Tahoma, Arial, sans-serif; line-height: 100%; }


h1 {
  font-family: "Archivo Narrow", "News Cycle", "Helvetica Neue", Helvetica, Tahoma, Arial, sans-serif; line-height: 100%;
  font-size: 30px; 
}
h1.home-modal {
  font-size: 5.4em;
  font-weight: 580;
  letter-spacing: 0.04em;
  color: #303030;
  font-family: Oswald, "News Cycle", Helvetica, Tahoma, Arial, sans-serif;
  text-transform: uppercase;
  text-align: center;
  margin: 35px 0 30px 0;
  text-shadow: -5px 5px 5px rgba(0, 0, 0, 0.1), -5px 2px 5px rgba(0, 0, 0, 0.05), -5px 2px 5px rgba(0, 0, 0, 0.05);
}
h2 {
  font-size: 18px;
}
h3.welcome {
  font-family: "Satisfy", cursive;
  color: #303030;
  font-size:36px;
  text-align: center;
  line-height: 100%;
  z-index: 100;
  margin-top: 15px;
  margin-bottom: 10px;
}
h3.content-type {
  padding: 10px 15px;
  color: #FFF;
  background-color: #000;
  display: inline-block;
  text-transform: uppercase;
  margin-left: -30px;
  margin-bottom: 15px;
  font-family: Oswald, "News Cycle", Helvetica, Tahoma, Arial, sans-serif;
  font-size: 14px;
  letter-spacing: 0.07em;
}

h4.side-head {
  font-family: Oswald, "News Cycle", Helvetica, Tahoma, Arial, sans-serif;
  font-size: 18px;
  color: #FFF;
  background-color:#4580b4;
  padding: 10px 15px;
  margin: 0;
  letter-spacing: 0.075em;
}

p {
  /*font-size: 1.1em;*/
  color: #070707;
  font-weight: 300;
  margin: 10px 0;
}
p.preview {
  font-weight: 300;
  margin-bottom: 0px;
}

p a,h1 a,h2 a,h3 a,h4 a,li a{
  color: rgb(0,136,204);
  border-bottom: none;
}

p a:hover{
  color: rgb(0,136,204);
  border-bottom: 1px solid #ffde4d;
}

.breadcrumbs a{
  color: rgb(0,136,204);
  border-bottom: none;
}

table a{
  border-bottom: none;
}

a { 
  border-bottom: 1px solid #ffde4d;
}

.category p a{ 
  border-bottom: 1px solid #ffde4d;
}

a:hover{
  border-bottom: 1px solid #ffde4d;
  text-decoration: none;
  color: rgb(0,136,204);
}

.sidebar-content  {
  font-size: 14px;
}


/* Top Navbar */
/* ---------- */
div.navbar-top {
  width: 100%;
  background-color: #070707;
  height: 80px;
}
div.logo {
  display: inline-block;
  padding-top:35px;
}
img.beta {
  margin-top: -65px;
  margin-left: -10px;
}
ul.nav-top {
  display: inline-block;
  padding-top: 35px;
}
.nav-top li {
  display: block;
  float: left;
}
.nav-top li a {
  color: #FFFFFF;
  font-weight: bold;
  float: none;
  font-size: 14px;
  margin: 9px 10px 2px;
  border-bottom: none;
}

.nav-top li a:hover {
  border-bottom: 1px solid #ffde4d;
}

.nav-top li a:active, .nav-top li a:focus{
  color: black;
}

div.header-search {
  padding-top: 35px;
}

/* Homepage Modal */
/* -------------- */
.container.main {
  margin-top: 50px;
  margin-bottom: 50px;
}
.modal-container {
  background-color: #fbfbfb;
  float: none;
  margin: 0 auto;
  padding: 40px 50px 50px 50px;
  border:1px solid #FFF;
  -moz-box-shadow:    0px 0px 20px 1px rgba(0, 0, 0, 0.4);
  -webkit-box-shadow: 0px 0px 20px 1px rgba(0, 0, 0, 0.4);
  box-shadow:         0px 0px 20px 1px rgba(0, 0, 0, 0.4);
}

div.pop-heading {
  border-bottom: 10px solid #ffde4d;
  margin: 0 0 20px 0;
}

p.call {
  font-size: 20px; 
  margin-bottom: 20px;
  text-align: center;
}
.pop-heading h2 {
  font-size:20px;
  font-weight: bold;
  margin-bottom: 10px;
}
div.category {
  padding: 20px 0;
  border-bottom: 1px solid #cdcbcb;
}
div.category.last {
  border: none;
}
.category {
  font-size: 14px;
  color: #333;
}
.category .left {
  font-size: 20px;
  width: 130px;
  display: inline-block;
  margin-right: 60px;
}

div.category a{
  color: rgb(51, 51, 51);
}

div.category a:hover{
  color: rgb(69, 128, 180);
}

.category .right{
  font-size: 120%;
  /*word-spacing: 20px;*/
}


/* Homepage Modal -- Search Ribbon*/
/* ------------------------------ */
div.search-ribbon {}
.ribbon-wrapper {
  position: relative;
  width: 700px;
  height: 60px;
  margin: 0 auto;
  text-align: center;
  padding-top: 10px;
}
.ribbon-front {
  position: relative;
  padding: 25px 70px;
  margin: 0 -78px 50px -78px;
  background-color: rgb(69, 128, 180);
  color: white;
  text-shadow: 0 1px 1px #155B88;
  box-shadow: 2px 1px 6px -3px rgba(0, 0, 0, 0.5), -2px 0px 5px -3px rgba(0, 0, 0, 0.5), 0px 5px 10px -4px rgba(0, 0, 0, 0.3);
}

.ribbon-front .triangle-l {
  border-color: transparent #4a7d95 transparent transparent;
  border-style:solid;
  border-width:34px;
  height:0;
  width:0;
  position: absolute;
  left: -34px;
  top: 83px;
  z-index: -1;
}

.ribbon-front .triangle-r {
  border-color: transparent transparent transparent #4a7d95;
  border-style:solid;
  border-width:34px;
  height:0;
  width:0;
  position: absolute;
  right: -34px;
  top: 83px;
  z-index: -1;
}


/* Search results page */
/* ------------------- */
.page-container {
  background-color: rgba(255, 255, 255, 0.8);
  background-repeat: repeat;
}
.page-container.search {
  padding-top:40px;
}

.main-content {
  background-color: #FFF;
  padding: 30px;
  opacity:1;
  margin-left: 20px;
  margin-bottom: 20px;
}
.main-content > .header { /* TODO */
  border-bottom: 6px solid #ffde4d;
  padding-bottom: 15px;
  margin-bottom: 10px;
}
.sidebar {
  height: 100%;
  margin-right: 20px;
}

.sidebar-unit {
    background-color: #FFF;
    margin-bottom: 20px;
}
li.article-listing, li.category-listing {
  border-bottom: 1px solid #DDD;
  padding: 20px 0px;
}
li:last-child.article-listing, li:last-child.category-listing {
  border-bottom: none;
}
.sidebar-content {
  padding: 10px 15px;
}
.sidebar ul li {
  padding: 10px 0;
}
.sidebar ul li:first-child {
  padding-top: 0;
}
li.category-article{
  padding:5px 0px;
}
.category-listing h1 {
  padding-bottom:5px;
}

li.article-listing a:hover{
  color: rgb(0,136,204);
  border-bottom: 1px solid #FFDE4D;
}

li.article-listing a{
  color: rgb(0,136,204);
}

li.article-listing p{
  color: #303030;
}

li.article-listing p:hover{
  color: #303030;
  border-bottom: none;
}

.suggestion {
  padding-top: 10px; 
}




div.content-text {
  padding-top: 20px;
  font-weight: 300;
}
.article .content-text h2 {
  margin-bottom: 20px;
  font-weight: bold;
  line-height: 150%;
}
.article .content-text h3 {
  margin-top: 40px;
  text-transform: uppercase;
  font-weight: bold;

}
.content-text p {
  color: rgb(51, 51, 51);
  margin-bottom: 12px;
}
.content-text ol, .content-text ul {
  margin: 0 12px;
  padding: 0 10px;
}
.content-text ol li, .content-text ul li{
  margin: 0 0 12px 30px;
  padding-left: 5px;
} 
.content-text ol li {  
  list-style-type: decimal;
}
.content-text ul li {
  list-style-type: disc;
}
div.quick_top{
  background: whitesmoke;
  padding: 20px;
}

/* TABLE */
table, th, td {
  padding: 5px;
}
table {
  width: 80%;
  margin: auto;
}
th {
  text-align: left;
  background-color: #f8f8f8;
}
td {
  text-align: left;
  background-color: #ededed;
  margin: 1px;
}

/*accessibility*/
a:focus, a:active { 
  color: black;
}

/* Style external links */
a[href ^= "http"]:after {
     content: " " url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAAVklEQVR4Xn3PgQkAMQhDUXfqTu7kTtkpd5RA8AInfArtQ2iRXFWT2QedAfttj2FsPIOE1eCOlEuoWWjgzYaB/IkeGOrxXhqB+uA9Bfcm0lAZuh+YIeAD+cAqSz4kCMUAAAAASUVORK5CYII=);    
}

.container a[href ^= "http"]:after {
     content: "";    
}

div.footer a[href ^= "http"]:after {
     content: none;
}

div.breadcrumbs a[href ^= "http"]:after {
     content: none;
}

.highlight {
	font-weight:bold;
}

.wmd-preview > ol li, .wmd-preview > ul li, .wmd-preview > ol li, .wmd-preview > ul li{
    margin: 2px 24px;
}
</style>

<script type="text/javascript">
$(document).ready(function() {


(function(){function identity(x){return x;}
function returnFalse(x){return false;}
function HookCollection(){}
HookCollection.prototype={chain:function(hookname,func){var original=this[hookname];if(!original)
throw new Error("unknown hook "+hookname);if(original===identity)
this[hookname]=func;else
this[hookname]=function(x){return func(original(x));}},set:function(hookname,func){if(!this[hookname])
throw new Error("unknown hook "+hookname);this[hookname]=func;},addNoop:function(hookname){this[hookname]=identity;},addFalse:function(hookname){this[hookname]=returnFalse;}};Markdown.HookCollection=HookCollection;function SaveHash(){}
SaveHash.prototype={set:function(key,value){this["s_"+key]=value;},get:function(key){return this["s_"+key];}};Markdown.Converter=function(){var pluginHooks=this.hooks=new HookCollection();pluginHooks.addNoop("plainLinkText");pluginHooks.addNoop("preConversion");pluginHooks.addNoop("postConversion");var g_urls;var g_titles;var g_html_blocks;var g_list_level;this.makeHtml=function(text){if(g_urls)
throw new Error("Recursive call to converter.makeHtml");g_urls=new SaveHash();g_titles=new SaveHash();g_html_blocks=[];g_list_level=0;text=pluginHooks.preConversion(text);text=text.replace(/~/g,"~T");text=text.replace(/\$/g,"~D");text=text.replace(/\r\n/g,"\n");text=text.replace(/\r/g,"\n");text="\n\n"+text+"\n\n";text=_Detab(text);text=_Tables(text);text=text.replace(/^[ \t]+$/mg,"");text=_HashHTMLBlocks(text);text=_StripLinkDefinitions(text);text=_DoCodeSpansGollum(text);text=_RunBlockGamut(text);text=_UnescapeSpecialChars(text);text=text.replace(/~D/g,"$$");text=text.replace(/~T/g,"~");text=pluginHooks.postConversion(text);g_html_blocks=g_titles=g_urls=null;return text;};function _StripLinkDefinitions(text){text=text.replace(/^[ ]{0,3}\[(.+)\]:[ \t]*\n?[ \t]*<?(\S+?)>?(?=\s|$)[ \t]*\n?[ \t]*((\n*)["(](.+?)[")][ \t]*)?(?:\n+)/gm,function(wholeMatch,m1,m2,m3,m4,m5){m1=m1.toLowerCase();g_urls.set(m1,_EncodeAmpsAndAngles(m2));if(m4){return m3;}else if(m5){g_titles.set(m1,m5.replace(/"/g,"&quot;"));}
return"";});return text;}
function _HashHTMLBlocks(text){var block_tags_a="p|div|h[1-6]|blockquote|pre|table|dl|ol|ul|script|noscript|form|fieldset|iframe|math|ins|del"
var block_tags_b="p|div|h[1-6]|blockquote|pre|table|dl|ol|ul|script|noscript|form|fieldset|iframe|math"
text=text.replace(/^(<(p|div|h[1-6]|blockquote|pre|table|dl|ol|ul|script|noscript|form|fieldset|iframe|math|ins|del)\b[^\r]*?\n<\/\2>[ \t]*(?=\n+))/gm,hashElement);text=text.replace(/^(<(p|div|h[1-6]|blockquote|pre|table|dl|ol|ul|script|noscript|form|fieldset|iframe|math)\b[^\r]*?.*<\/\2>[ \t]*(?=\n+)\n)/gm,hashElement);text=text.replace(/\n[ ]{0,3}((<(hr)\b([^<>])*?\/?>)[ \t]*(?=\n{2,}))/g,hashElement);text=text.replace(/\n\n[ ]{0,3}(<!(--(?:|(?:[^>-]|-[^>])(?:[^-]|-[^-])*)--)>[ \t]*(?=\n{2,}))/g,hashElement);text=text.replace(/(?:\n\n)([ ]{0,3}(?:<([?%])[^\r]*?\2>)[ \t]*(?=\n{2,}))/g,hashElement);return text;}
function hashElement(wholeMatch,m1){var blockText=m1;blockText=blockText.replace(/^\n+/,"");blockText=blockText.replace(/\n+$/g,"");blockText="\n\n~K"+(g_html_blocks.push(blockText)-1)+"K\n\n";return blockText;}
function _RunBlockGamut(text,doNotUnhash){text=_DoHeaders(text);var replacement="<hr />\n";text=text.replace(/^[ ]{0,2}([ ]?\*[ ]?){3,}[ \t]*$/gm,replacement);text=text.replace(/^[ ]{0,2}([ ]?-[ ]?){3,}[ \t]*$/gm,replacement);text=text.replace(/^[ ]{0,2}([ ]?_[ ]?){3,}[ \t]*$/gm,replacement);text=_DoLists(text);text=_DoCodeBlocks(text);text=_DoBlockQuotes(text);text=_HashHTMLBlocks(text);text=_FormParagraphs(text,doNotUnhash);return text;}
function _RunSpanGamut(text){text=_DoCodeSpans(text);text=_EscapeSpecialCharsWithinTagAttributes(text);text=_EncodeBackslashEscapes(text);text=_DoImages(text);text=_DoAnchors(text);text=_DoAutoLinks(text);text=text.replace(/~P/g,"://");text=_EncodeAmpsAndAngles(text);text=_DoItalicsAndBold(text);text=text.replace(/  +\n/g," <br>\n");return text;}
function _doTable_leadingPipe_callback(str,head,underline,content){content=content.replace(/^ *[|]/mg,'');return _DoTable_callback(str,head,underline,content);}
function _DoTable_callback(str,head,underline,content){head=head.replace(/[|] *$/mg,'');underline=underline.replace(/[|] *$/mg,'');content=content.replace(/[|] *$/mg,'');var separators=underline.split(/ *[|] */);var separatorsLength=separators.length;var attr=[];for(var i=0;i<separatorsLength;i++){if(separators[i].match(/^ *-+: *$/)){attr[i]=' align="right"';}else if(separators[i].match(/^ *:-+: *$/)){attr[i]=' align="center"';}else if(separators[i].match(/^ *:-+ *$/)){attr[i]=' align="left"';}else{attr[i]='';}}
head=_RunSpanGamut(head);var headers=head.split(/ *[|] */);var col_count=headers.length;var text="<table>\n";text+="<thead>\n";text+="<tr>\n";for(var i=0;i<col_count;i++){text+="  <th"+attr[i]+">"+_RunSpanGamut(headers[i].trim())+"</th>\n";}
text+="</tr>\n";text+="</thead>\n";var rows=content.trim().split("\n");text+="<tbody>\n";for(var i=0;i<rows.length;i++){var row=_RunSpanGamut(rows[i]);var row_cells=row.split(/ *[|] */);var row_cells_count=row_cells.length;while(row_cells_count<col_count){row_cells[row_cells_count++-1]='';}
text+="<tr>\n";for(var a=0;a<row_cells.length;a++){text+="  <td"+attr[i]+">"+_RunSpanGamut(row_cells[a].trim())+"</td>\n";}
text+="</tr>\n";}
text+="</tbody>\n";text+="</table>";return hashBlock(text)+"\n";}
function _Tables(text){var rgx_leading_pipe=/^[ ]{0,3}[|]([\S\s]+)\n[ ]{0,3}[|]([ ]*[-:]+[-| :]*)\n((?:(?=([ ]*[|][\S\s]*\n))\4)*)(?=\n|(?![\s\S]))/mg
text=text.replace(rgx_leading_pipe,_doTable_leadingPipe_callback);var rgx_no_leading_pipe=/^[ ]{0,3}(\S[\S\s]*[|][\S\s]*)\n[ ]{0,3}([-:]+[ ]*[|][-| :]*)\n((?:(?=([\S\s]*[|][\S\s]*\n))\4)*)(?=\n|(?![\s\S]))/mg
text=text.replace(rgx_no_leading_pipe,_DoTable_callback);return text;}
function _EscapeSpecialCharsWithinTagAttributes(text){var regex=/(<[a-z\/!$]("[^"]*"|'[^']*'|[^'">])*>|<!(--(?:|(?:[^>-]|-[^>])(?:[^-]|-[^-])*)--)>)/gi;text=text.replace(regex,function(wholeMatch){var tag=wholeMatch.replace(/(.)<\/?code>(?=.)/g,"$1`");tag=escapeCharacters(tag,wholeMatch.charAt(1)=="!"?"\\`*_/":"\\`*_");return tag;});return text;}
function _DoAnchors(text){text=text.replace(/(\[((?:\[[^\]]*\]|[^\[\]])*)\][ ]?(?:\n[ ]*)?\[(.*?)\])()()()()/g,writeAnchorTag);text=text.replace(/(\[((?:\[[^\]]*\]|[^\[\]])*)\]\([ \t]*()<?((?:\([^)]*\)|[^()\s])*?)>?[ \t]*((['"])(.*?)\6[ \t]*)?\))/g,writeAnchorTag);text=text.replace(/(\[([^\[\]]+)\])()()()()()/g,writeAnchorTag);return text;}
function writeAnchorTag(wholeMatch,m1,m2,m3,m4,m5,m6,m7){if(m7==undefined)m7="";var whole_match=m1;var link_text=m2.replace(/:\/\//g,"~P");var link_id=m3.toLowerCase();var url=m4;var title=m7;if(url==""){if(link_id==""){link_id=link_text.toLowerCase().replace(/ ?\n/g," ");}
url="#"+link_id;if(g_urls.get(link_id)!=undefined){url=g_urls.get(link_id);if(g_titles.get(link_id)!=undefined){title=g_titles.get(link_id);}}
else{if(whole_match.search(/\(\s*\)$/m)>-1){url="";}else{return whole_match;}}}
url=encodeProblemUrlChars(url);url=escapeCharacters(url,"*_");var result="<a href=\""+url+"\"";if(title!=""){title=attributeEncode(title);title=escapeCharacters(title,"*_");result+=" title=\""+title+"\"";}
result+=">"+link_text+"</a>";return result;}
function _DoImages(text){text=text.replace(/(!\[(.*?)\][ ]?(?:\n[ ]*)?\[(.*?)\])()()()()/g,writeImageTag);text=text.replace(/(!\[(.*?)\]\s?\([ \t]*()<?(\S+?)>?[ \t]*((['"])(.*?)\6[ \t]*)?\))/g,writeImageTag);return text;}
function attributeEncode(text){return text.replace(/>/g,"&gt;").replace(/</g,"&lt;").replace(/"/g,"&quot;");}
function writeImageTag(wholeMatch,m1,m2,m3,m4,m5,m6,m7){var whole_match=m1;var alt_text=m2;var link_id=m3.toLowerCase();var url=m4;var title=m7;if(!title)title="";if(url==""){if(link_id==""){link_id=alt_text.toLowerCase().replace(/ ?\n/g," ");}
url="#"+link_id;if(g_urls.get(link_id)!=undefined){url=g_urls.get(link_id);if(g_titles.get(link_id)!=undefined){title=g_titles.get(link_id);}}
else{return whole_match;}}
alt_text=escapeCharacters(attributeEncode(alt_text),"*_[]()");url=escapeCharacters(url,"*_");var result="<img src=\""+url+"\" alt=\""+alt_text+"\"";title=attributeEncode(title);title=escapeCharacters(title,"*_");result+=" title=\""+title+"\"";result+=" />";return result;}
function _DoHeaders(text){text=text.replace(/^(.+)[ \t]*\n=+[ \t]*\n+/gm,function(wholeMatch,m1){return"<h1>"+_RunSpanGamut(m1)+"</h1>\n\n";});text=text.replace(/^(.+)[ \t]*\n-+[ \t]*\n+/gm,function(matchFound,m1){return"<h2>"+_RunSpanGamut(m1)+"</h2>\n\n";});text=text.replace(/^(\#{1,6})[ \t]*(.+?)[ \t]*\#*\n+/gm,function(wholeMatch,m1,m2){var h_level=m1.length;return"<h"+h_level+">"+_RunSpanGamut(m2)+"</h"+h_level+">\n\n";});return text;}
function _DoLists(text){text+="~0";var whole_list=/^(([ ]{0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(~0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/gm;if(g_list_level){text=text.replace(whole_list,function(wholeMatch,m1,m2){var list=m1;var list_type=(m2.search(/[*+-]/g)>-1)?"ul":"ol";var result=_ProcessListItems(list,list_type);result=result.replace(/\s+$/,"");result="<"+list_type+">"+result+"</"+list_type+">\n";return result;});}else{whole_list=/(\n\n|^\n?)(([ ]{0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(~0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/g;text=text.replace(whole_list,function(wholeMatch,m1,m2,m3){var runup=m1;var list=m2;var list_type=(m3.search(/[*+-]/g)>-1)?"ul":"ol";var result=_ProcessListItems(list,list_type);result=runup+"<"+list_type+">\n"+result+"</"+list_type+">\n";return result;});}
text=text.replace(/~0/,"");return text;}
var _listItemMarkers={ol:"\\d+[.]",ul:"[*+-]"};function _ProcessListItems(list_str,list_type){g_list_level++;list_str=list_str.replace(/\n{2,}$/,"\n");list_str+="~0";var marker=_listItemMarkers[list_type];var re=new RegExp("(^[ \\t]*)("+marker+")[ \\t]+([^\\r]+?(\\n+))(?=(~0|\\1("+marker+")[ \\t]+))","gm");var last_item_had_a_double_newline=false;list_str=list_str.replace(re,function(wholeMatch,m1,m2,m3){var item=m3;var leading_space=m1;var ends_with_double_newline=/\n\n$/.test(item);var contains_double_newline=ends_with_double_newline||item.search(/\n{2,}/)>-1;if(contains_double_newline||last_item_had_a_double_newline){item=_RunBlockGamut(_Outdent(item),true);}
else{item=_DoLists(_Outdent(item));item=item.replace(/\n$/,"");item=_RunSpanGamut(item);}
last_item_had_a_double_newline=ends_with_double_newline;return"<li>"+item+"</li>\n";});list_str=list_str.replace(/~0/g,"");g_list_level--;return list_str;}
function _DoCodeBlocks(text){text+="~0";text=text.replace(/(?:\n\n|^)((?:(?:[ ]{4}|\t).*\n+)+)(\n*[ ]{0,3}[^ \t\n]|(?=~0))/g,function(wholeMatch,m1,m2){var codeblock=m1;var nextChar=m2;codeblock=_EncodeCode(_Outdent(codeblock));codeblock=_Detab(codeblock);codeblock=codeblock.replace(/^\n+/g,"");codeblock=codeblock.replace(/\n+$/g,"");codeblock="<pre><code>"+codeblock+"\n</code></pre>";return"\n\n"+codeblock+"\n\n"+nextChar;});text=text.replace(/~0/,"");return text;}
function hashBlock(text){text=text.replace(/(^\n+|\n+$)/g,"");return"\n\n~K"+(g_html_blocks.push(text)-1)+"K\n\n";}
function _DoCodeSpans(text){text=text.replace(/(^|[^\\])(`+)([^\r]*?[^`])\2(?!`)/gm,function(wholeMatch,m1,m2,m3,m4){var c=m3;c=c.replace(/^([ \t]*)/g,"");c=c.replace(/[ \t]*$/g,"");c=_EncodeCode(c);c=c.replace(/:\/\//g,"~P");return m1+"<code>"+c+"</code>";});return text;}
function _DoCodeSpansGollum(text){text=text.replace(/(^|[^\\])(`{3})([^\r]*?[^`])\2(?!`)/gm,function(wholeMatch,m1,m2,m3,m4){var c=m3;c=c.replace(/^([ \t]*)/g,"");c=c.replace(/[ \t]*$/g,"");c=_EncodeCode(c);c=c.replace(/:\/\//gm,"~P");return m1+hashBlock("<pre>`"+c+"</pre>");});return text;}
function _EncodeCode(text){text=text.replace(/&/g,"&amp;");text=text.replace(/</g,"&lt;");text=text.replace(/>/g,"&gt;");text=escapeCharacters(text,"\*_{}[]\\",false);return text;}
function _DoItalicsAndBold(text){text=text.replace(/([\W_]|^)(\*\*|__)(?=\S)([^\r]*?\S[\*_]*)\2([\W_]|$)/g,"$1<strong>$3</strong>$4");text=text.replace(/([\W_]|^)(\*|_)(?=\S)([^\r\*_]*?\S)\2([\W_]|$)/g,"$1<em>$3</em>$4");return text;}
function _DoBlockQuotes(text){text=text.replace(/((^[ \t]*>[ \t]?.+\n(.+\n)*\n*)+)/gm,function(wholeMatch,m1){var bq=m1;bq=bq.replace(/^[ \t]*>[ \t]?/gm,"~0");bq=bq.replace(/~0/g,"");bq=bq.replace(/^[ \t]+$/gm,"");bq=_RunBlockGamut(bq);bq=bq.replace(/(^|\n)/g,"$1  ");bq=bq.replace(/(\s*<pre>[^\r]+?<\/pre>)/gm,function(wholeMatch,m1){var pre=m1;pre=pre.replace(/^  /mg,"~0");pre=pre.replace(/~0/g,"");return pre;});return hashBlock("<blockquote>\n"+bq+"\n</blockquote>");});return text;}
function _FormParagraphs(text,doNotUnhash){text=text.replace(/^\n+/g,"");text=text.replace(/\n+$/g,"");var grafs=text.split(/\n{2,}/g);var grafsOut=[];var markerRe=/~K(\d+)K/;var end=grafs.length;for(var i=0;i<end;i++){var str=grafs[i];if(markerRe.test(str)){grafsOut.push(str);}
else if(/\S/.test(str)){str=_RunSpanGamut(str);str=str.replace(/^([ \t]*)/g,"<p>");str+="</p>"
grafsOut.push(str);}}
if(!doNotUnhash){end=grafsOut.length;for(var i=0;i<end;i++){var foundAny=true;while(foundAny){foundAny=false;grafsOut[i]=grafsOut[i].replace(/~K(\d+)K/g,function(wholeMatch,id){foundAny=true;return g_html_blocks[id];});}}}
return grafsOut.join("\n\n");}
function _EncodeAmpsAndAngles(text){text=text.replace(/&(?!#?[xX]?(?:[0-9a-fA-F]+|\w+);)/g,"&amp;");text=text.replace(/<(?![a-z\/?\$!])/gi,"&lt;");return text;}
function _EncodeBackslashEscapes(text){text=text.replace(/\\(\\)/g,escapeCharacters_callback);text=text.replace(/\\([`*_{}\[\]()>#+-.!])/g,escapeCharacters_callback);return text;}
function _DoAutoLinks(text){text=text.replace(/(^|\s)(https?|ftp)(:\/\/[-A-Z0-9+&@#\/%?=~_|\[\]\(\)!:,\.;]*[-A-Z0-9+&@#\/%=~_|\[\]])($|\W)/gi,"$1<$2$3>$4");var replacer=function(wholematch,m1){return"<a href=\""+m1+"\">"+pluginHooks.plainLinkText(m1)+"</a>";}
text=text.replace(/<((https?|ftp):[^'">\s]+)>/gi,replacer);return text;}
function _UnescapeSpecialChars(text){text=text.replace(/~E(\d+)E/g,function(wholeMatch,m1){var charCodeToReplace=parseInt(m1);return String.fromCharCode(charCodeToReplace);});return text;}
function _Outdent(text){text=text.replace(/^(\t|[ ]{1,4})/gm,"~0");text=text.replace(/~0/g,"")
return text;}
function _Detab(text){if(!/\t/.test(text))
return text;var spaces=["    ","   ","  "," "],skew=0,v;return text.replace(/[\n\t]/g,function(match,offset){if(match==="\n"){skew=offset+1;return match;}
v=(offset-skew)%4;skew=offset+1;return spaces[v];});}
var _problemUrlChars=/(?:["'*()[\]:]|~D)/g;function encodeProblemUrlChars(url){if(!url)
return"";var len=url.length;return url.replace(_problemUrlChars,function(match,offset){if(match=="~D")
return"%24";if(match==":"){if(offset==len-1||/[0-9\/]/.test(url.charAt(offset+1)))
return":"}
return"%"+match.charCodeAt(0).toString(16);});}
function escapeCharacters(text,charsToEscape,afterBackslash){var regexString="(["+charsToEscape.replace(/([\[\]\\])/g,"\\$1")+"])";if(afterBackslash){regexString="\\\\"+regexString;}
var regex=new RegExp(regexString,"g");text=text.replace(regex,escapeCharacters_callback);return text;}
function escapeCharacters_callback(wholeMatch,m1){var charCodeToEscape=m1.charCodeAt(0);return"~E"+charCodeToEscape+"E";}};})();(function(){var output,Converter;if(typeof exports==="object"&&typeof require==="function"){output=exports;Converter=require("./Markdown.Converter").Converter;}else{output=window.Markdown;Converter=output.Converter;}
output.getSanitizingConverter=function(){var converter=new Converter();converter.hooks.chain("postConversion",sanitizeHtml);converter.hooks.chain("postConversion",balanceTags);return converter;}
function sanitizeHtml(html){return html.replace(/<[^>]*>?/gi,sanitizeTag);}
var basic_tag_whitelist=/^(<\/?(table|thead|tr|th|tbody|td|b|blockquote|code|del|dd|dl|dt|em|h1|h2|h3|h4|h5|h6|i|kbd|li|ol|p|pre|s|sup|sub|strong|strike|ul)>|<(br|hr)\s?\/?>)$/i;var a_white=/^(<a\shref="(((https?|ftp):\/\/|\/))?[-A-Za-z0-9+&@#\/%?=~_|!:,.;\(\)]+"(\stitle="[^"<>]+")?\s?>|<\/a>)$/i;var img_white=/^(<img\ssrc="(https?:\/\/|\/)[-A-Za-z0-9+&@#\/%?=~_|!:,.;\(\)]+"(\swidth="\d{1,3}")?(\sheight="\d{1,3}")?(\salt="[^"<>]*")?(\stitle="[^"<>]*")?\s?\/?>)$/i;function sanitizeTag(tag){if(tag.match(basic_tag_whitelist)||tag.match(a_white)||tag.match(img_white))
return tag;else
return"";}
function balanceTags(html){if(html=="")
return"";var re=/<\/?\w+[^>]*(\s|$|>)/g;var tags=html.toLowerCase().match(re);var tagcount=(tags||[]).length;if(tagcount==0)
return html;var tagname,tag;var ignoredtags="<p><img><br><li><hr>";var match;var tagpaired=[];var tagremove=[];var needsRemoval=false;for(var ctag=0;ctag<tagcount;ctag++){tagname=tags[ctag].replace(/<\/?(\w+).*/,"$1");if(tagpaired[ctag]||ignoredtags.search("<"+tagname+">")>-1)
continue;tag=tags[ctag];match=-1;if(!/^<\//.test(tag)){for(var ntag=ctag+1;ntag<tagcount;ntag++){if(!tagpaired[ntag]&&tags[ntag]=="</"+tagname+">"){match=ntag;break;}}}
if(match==-1)
needsRemoval=tagremove[ctag]=true;else
tagpaired[match]=true;}
if(!needsRemoval)
return html;var ctag=0;html=html.replace(re,function(match){var res=tagremove[ctag]?"":match;ctag++;return res;});return html;}})();var is={ie:navigator.appName=='Microsoft Internet Explorer',java:navigator.javaEnabled(),ns:navigator.appName=='Netscape',ua:navigator.userAgent.toLowerCase(),version:parseFloat(navigator.appVersion.substr(21))||parseFloat(navigator.appVersion),win:navigator.platform=='Win32'}
is.mac=is.ua.indexOf('mac')>=0;if(is.ua.indexOf('opera')>=0){is.ie=is.ns=false;is.opera=true;}
if(is.ua.indexOf('gecko')>=0){is.ie=is.ns=false;is.gecko=true;}

  // instantiate pagedown 
  var converter_content_main         = new Markdown.getSanitizingConverter();
  var converter_content_main_extra   = new Markdown.getSanitizingConverter();
  var converter_content_need_to_know = new Markdown.getSanitizingConverter();
  
  var editor_content_main = new Markdown.Editor(
  converter_content_main, "-content_main");
    
  var editor_content_main_extra = new Markdown.Editor(
    converter_content_main_extra, "-content_main_extra");
    
  var editor_content_need_to_know = new Markdown.Editor(
    converter_content_need_to_know, "-content_need_to_know");

  editor_content_main.run();
  editor_content_main_extra.run();
  editor_content_need_to_know.run();

 //  // Add support for quick-top in markdown
 // converter.hooks.chain("postConversion", function (text) {
 //   // if <hr> is found:
 //   // 1) replace <hr> with </div>
 //   // 2) insert at the top of the text, <div class='quick-top'>
 //   var hr = /<hr( \/)?>/;
 //   if( text.match(hr) ) {
 //     text = text.replace(hr, "</div>");
 //     text = "<div class='quick_top'>".concat(text);
 //   }
 //   return text;
 // });

});
</script>



